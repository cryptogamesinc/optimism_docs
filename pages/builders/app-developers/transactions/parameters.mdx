---
title: OP Mainnetでのトランザクションガスパラメータの設定
lang: en-US
description: OP Mainnetでのトランザクションのガスパラメータを設定する方法を学びます。
---

import { Callout, Steps } from 'nextra/components'

# OP Mainnetでのトランザクションガスパラメータの設定

OP Mainnetは[EVM互換](https://web.archive.org/web/20231127160757/https://medium.com/ethereum-optimism/introducing-evm-equivalence-5c2021deb306)を目指して設計されており、OP Mainnetノードを実行するために使用されるクライアントソフトウェアに至るまで、可能な限りEthereumと互換性があります。
Ethereumと同様に、OP MainnetにはEIP-1559スタイルの料金メカニズムがあり、トランザクションがブロックに含まれるために支払わなければならない最低料金として機能する[ベース料金](https://ethereum.org/en/developers/docs/gas/#base-fee)を動的に調整します。
OP Mainnetでは、トランザクションがより迅速に含まれるようにSequencerをインセンティブするために[優先料金](https://ethereum.org/en/developers/docs/gas/#priority-fee)（チップとも呼ばれる）を支払うこともできます。

ベース料金と優先料金を適切に設定することは、トランザクションがタイムリーに含まれることを保証するために重要です。
このガイドでは、トランザクションのベース料金と優先料金を決定するためのベストプラクティスを紹介します。

## ベース料金の選択

ベース料金は、トランザクションがブロックに含まれるために支払わなければならない最低料金です。
現在のベース料金よりも低い最大料金を指定したトランザクションは、ブロックチェーンに含まれることができません。

ベース料金を選択する最も簡単な方法は、最新のOP Mainnetブロックを確認することです。
各OP Mainnetブロックには、現在のベース料金とそのブロック内で使用されたガス量が含まれています。
この情報を使用して、トランザクションのための合理的な最大料金を予測できます。

Ethereumと同様に、ベース料金はトランザクション内で明示的に定義されていないことに注意してください。
代わりに、最大ベース料金は任意のトランザクションの`maxFeePerGas`と`maxPriorityFeePerGas`フィールドの差として決定されます。

<Steps>

{<h3>最新のブロックを取得する</h3>}

JSON-RPC APIまたはお気に入りのEthereumライブラリを使用して、OP Mainnetの最新ブロックを取得します。

{<h3>ベース料金と使用されたガスを取得する</h3>}

ブロックから、`baseFeePerGas`と`gasUsed`フィールドを取得します。

{<h3>次のベース料金を予測する</h3>}

OP Mainnetは、前のブロックで使用されたガス量に基づいてベース料金を調整します。
前のブロックで5百万ガス（30百万ガスの制限のうち）以上が使用された場合、ベース料金は最大10％増加します。
前のブロックで5百万ガス未満が使用された場合、ベース料金は最大10％減少します。
詳細については、[OP Mainnet EIP-1559パラメータ](/chain/differences#eip-1559-parameters)セクションを参照してください。

{<h3>ガスあたりのベース料金を選択する</h3>}

現在のガスあたりのベース料金と前のブロックで使用されたガス量を使用して、次のガスあたりのベース料金を予測できます。
ベース料金に非常に敏感な場合は、前のベース料金よりも10％高いか10％低いガスあたりのベース料金を選択することをお勧めします。
ただし、トランザクションが迅速にブロックに含まれないリスクがあります。
ベース料金にあまり敏感でない場合は、前のベース料金の大きな倍数（例：2倍）を使用することをお勧めします。

</Steps>

## 優先料金の選択

優先料金は、トランザクションがより迅速に含まれるようにSequencerをインセンティブするために支払うオプションのチップです。
優先料金はベース料金に加えて支払われます。

優先料金を選択する最も簡単な方法は、[`eth_maxPriorityFeePerGas`](https://docs.alchemy.com/reference/eth-maxpriorityfeepergas) JSON-RPCメソッドを使用して、許容される優先料金の見積もりを取得することです。
多くのEthereumライブラリには、このJSON-RPCメソッドを呼び出すための関数が用意されています。
また、[`eth_feeHistory`](https://docs.alchemy.com/reference/eth-feehistory) JSON-RPCメソッドを使用して、過去の優先料金データを取得することもできます。
このデータを使用して、トランザクションのための合理的な優先料金を予測できます。
